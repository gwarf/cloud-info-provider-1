<% last_img_index = len(attributes["images"])-1 %>
[
% for image_id, image in attributes["images"].iteritems():
{
  "image_id": "${image_id}",
  ## Docker stuff
  % if 'dockerid' in image:
  "image_name": "${image["dockername"]}:${image["dockertag"]}",
  "docker_id": "${image["dockerid"]}",
  % else:
  "image_name": "${image["image_name"]}",
  % endif
  % if 'vmcatcher_event_ad_mpuri' in image:
  "image_marketplace_id": "${image["vmcatcher_event_ad_mpuri"]}",
  % endif
  % if 'description' in image:
  "image_description": "${image["description"]}",
  % endif
  ## Architecture
  % if 'hw_architecture' in image:
  "architecture": "${image["hw_architecture"]}",
  % elif 'architecture' in image:
  "architecture": "${image["architecture"]}",
  % endif
  ## OS type
  % if 'os' in image:
  "type": "${image["os"]}",
  % endif
  ## OS distribution
  % if 'distribution' in image:
  "distribution": "${image["distribution"]}",
  % endif
  ## OS version
  % if 'version' in image:
  "version": "${image["version"]}"
  % elif 'dist_version' in image:
  "version": "${image["dist_version"]}"
  % elif 'vmcatcher_event_hv_version' in image:
  "version": "${image["vmcatcher_event_hv_version"]}"
  % endif
  % if loop.index < last_img_index:
},
  % else:
}
% endif
% endfor
]
